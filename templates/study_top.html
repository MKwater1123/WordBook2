{% extends "layout.html" %}
{% block title %}å­¦ç¿’ - VocabularyBook{% endblock %}

{% block content %}

<div class="max-w-xl mx-auto mt-10">
    <h1 class="text-2xl font-bold text-gray-800 mb-6 text-center">ğŸ“ å­¦ç¿’ãƒˆãƒƒãƒ—</h1>

    <!-- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, message in messages %}
    <div class="mb-4 px-4 py-3 rounded-lg text-sm font-medium
      {% if category == 'success' %}bg-blue-50 text-blue-800 border border-blue-200
      {% elif category == 'error' %}bg-red-50 text-red-800 border border-red-200
      {% else %}bg-amber-50 text-amber-800 border border-amber-200{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
    {% endwith %}

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">

        <!-- Reading ã‚«ãƒ¼ãƒ‰ -->
        <div class="bg-white rounded-2xl shadow-md border border-gray-200 p-6 text-center">
            <p class="text-xl font-bold text-indigo-700 mb-1">ğŸ“– Reading</p>
            <p class="text-gray-500 text-sm mb-2">å˜èªå¸³: {{ reading_total }} ä»¶</p>
            <p
                class="text-5xl font-extrabold {% if reading_due > 0 %}text-indigo-600{% else %}text-gray-300{% endif %} mb-1">
                {{ reading_due }}
            </p>
            <p class="text-gray-400 text-xs mb-5">ä»Šæ—¥ã®å­¦ç¿’ã‚«ãƒ¼ãƒ‰</p>
            {% if reading_due > 0 %}
            <form action="{{ url_for('study_start') }}" method="POST">
                <input type="hidden" name="book" value="reading" />
                <button type="submit"
                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2.5 rounded-xl text-base transition shadow">
                    å­¦ç¿’é–‹å§‹ â†’
                </button>
            </form>
            {% else %}
            <div
                class="w-full bg-gray-100 text-gray-400 font-bold py-2.5 rounded-xl text-sm cursor-not-allowed border border-gray-200">
                å®Œäº† âœ…
            </div>
            {% if reading_total == 0 %}
            <p class="text-xs text-gray-400 mt-2">
                <a href="{{ url_for('index') }}" class="text-indigo-500 hover:underline">æ¤œç´¢ãƒšãƒ¼ã‚¸</a>ã‹ã‚‰å˜èªã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
            </p>
            {% endif %}
            {% endif %}
        </div>

        <!-- Listening ã‚«ãƒ¼ãƒ‰ -->
        <div class="bg-white rounded-2xl shadow-md border border-gray-200 p-6 text-center">
            <p class="text-xl font-bold text-sky-700 mb-1">ğŸ§ Listening</p>
            <p class="text-gray-500 text-sm mb-2">å˜èªå¸³: {{ listening_total }} ä»¶</p>
            <p
                class="text-5xl font-extrabold {% if listening_due > 0 %}text-sky-600{% else %}text-gray-300{% endif %} mb-1">
                {{ listening_due }}
            </p>
            <p class="text-gray-400 text-xs mb-5">ä»Šæ—¥ã®å­¦ç¿’ã‚«ãƒ¼ãƒ‰</p>
            {% if listening_due > 0 %}
            <form action="{{ url_for('study_start') }}" method="POST">
                <input type="hidden" name="book" value="listening" />
                <button type="submit"
                    class="w-full bg-sky-600 hover:bg-sky-700 text-white font-bold py-2.5 rounded-xl text-base transition shadow">
                    å­¦ç¿’é–‹å§‹ â†’
                </button>
            </form>
            {% else %}
            <div
                class="w-full bg-gray-100 text-gray-400 font-bold py-2.5 rounded-xl text-sm cursor-not-allowed border border-gray-200">
                å®Œäº† âœ…
            </div>
            {% if listening_total == 0 %}
            <p class="text-xs text-gray-400 mt-2">
                <a href="{{ url_for('index') }}" class="text-sky-500 hover:underline">æ¤œç´¢ãƒšãƒ¼ã‚¸</a>ã‹ã‚‰å˜èªã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
            </p>
            {% endif %}
            {% endif %}
        </div>

    </div>
</div>

{% endblock %}